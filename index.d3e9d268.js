!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),a.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),a.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),a("iE7OH").register(JSON.parse('{"EVgbq":"index.d3e9d268.js","7mj2y":"plug-empte-book_335x485.3bc43583.png","jPeva":"plug-empte-book_218x316.adc93518.png","gB8wt":"plug-empte-book_180x256.b984b05b.png","jQaHS":"amazon_62x19.626c9508.png","51pAD":"apple-book_33x32.9b2fbf78.png","3fT1R":"book-shop_38x36.1d091ebd.png","1XaNB":"index.bfb412ab.css","01IoP":"shopping-list.c08662ba.js"}'));var r=a("bpxeT"),c=a("2TvXO"),s=(r=a("bpxeT"),a("8MBJY")),i={};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var n=l.default(e,t,"get");return d.default(e,n)};var l=u(a("1UHsN")),d=u(a("ffZzF"));function u(e){return e&&e.__esModule?e:{default:e}}var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(e,t,n){m.default(e,t),t.set(e,n)};var f,m=(f=a("5k7tO"))&&f.__esModule?f:{default:f};var v=a("a2hTj"),b=(c=a("2TvXO"),a("dIxxU")),g=new WeakMap,h=function(){"use strict";function t(){e(s)(this,t),e(p)(this,g,{writable:!0,value:"https://books-backend.p.goit.global/books/"})}return e(v)(t,[{key:"fetchTopBooks",value:function(){var t=this;return e(r)(e(c).mark((function n(){return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.default.get("".concat(e(i)(t,g),"/top-books")).catch(console.error);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}]),t}(),k=a("6JpON"),w=document.querySelector(".loader-backdrop");function y(){w.classList.add("is-hidden")}function L(){w.classList.remove("is-hidden")}var _=new h,x=document.querySelector(".top-books");function E(){return S.apply(this,arguments)}function S(){return(S=e(r)(e(c).mark((function t(){var n;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.fetchTopBooks();case 3:return n=t.sent.data,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e(k).Notify.failure("Oops! Something went wrong... Please try again.");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var H;H=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("7mj2y");var O;O=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("jPeva");var T;function q(){var e=window.innerWidth;return e<768?new URL(H):e<1440?new URL(O):new URL(T)}function R(){return(R=e(r)(e(c).mark((function t(){var n,o,a,r,s,i,l,d,u,p,f,m,v,b,g,h,k,w,L,_,S;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:for(n=e.sent,o=5,o=window.innerWidth<768?1:window.innerWidth<1440?3:5,a="",r=!0,s=!1,i=void 0,e.prev=7,l=n[Symbol.iterator]();!(r=(d=l.next()).done);r=!0){for(u=d.value,p=u.list_name,f=u.books,m='\n      <li>\n        <h3 class="name-category">'.concat(p,'</h3>\n        <ul class="list-category">\n    '),v=0;v<o&&v<f.length;v+=1)b=f[v],g=b._id,h=b.book_image,k=b.title,w=b.author,m+='\n        <li class="item-category-book js-book-modal" data-book-id="'.concat(g,'">\n          <a class="link-books" href="#">\n            <div class="card-book">\n              <div class="img-card-book">\n                <img src="').concat(h,'" alt="book" class="img-book" loading="lazy" data-id="').concat(g,'" onerror="src=\'').concat(q(),'\'"/>\n              </div>\n              <div class="bestsellers-text-wrapper">\n                <div class="title-wrap">\n                  <p class="title-book">').concat(k,'</p>\n                </div>\n                <div class="author-wrap">\n                  <p class="book-author">').concat(w,"</p>\n                </div>\n              </div>\n            </div>\n          </a>\n        </li>\n      ");a+=m+='\n        </ul>\n        <button type="button" aria-label="See more" class="see-more">See more</button>\n      </li>\n    '}e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),s=!0,i=e.t0;case 15:e.prev=15,e.prev=16,r||null==l.return||l.return();case 18:if(e.prev=18,!s){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:if(x)for(x.innerHTML="",x.insertAdjacentHTML("beforeend",a),L=document.querySelectorAll(".see-more"),_=document.querySelectorAll(".bookcat"),S=0;S<n.length;S++)L[S].addEventListener("click",(function(){_[S+1].click(),window.scrollTo({top:0,behavior:"smooth"})}));y();case 25:case"end":return e.stop()}}),t,null,[[7,11,15,23],[16,,18,22]])})))).apply(this,arguments)}T=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("gB8wt"),function(){R.apply(this,arguments)}(),a("32ZrB"),a("ax6eO");r=a("bpxeT"),c=a("2TvXO");a("6JpON");var A;A=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("jQaHS");var j;j=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("51pAD");var B;B=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("3fT1R"),function(){var t={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),cardModal:document.querySelector(".card-modal")};t.closeModalBtn.addEventListener("click",(function(){document.body.classList.remove("modal-open"),t.modal.classList.add("is-hidden-modal-book"),document.removeEventListener("keydown",v),window.addEventListener("click",i)}));var n="",o="",a="",s="";function i(e){return l.apply(this,arguments)}function l(){return(l=e(r)(e(c).mark((function t(r){var i,l,f,v,g,h;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=r.target.getAttribute("data-id"))){e.next=5;break}return e.abrupt("return");case 5:m();case 6:return console.log("это айди",n),e.next=9,p(n);case 9:i=e.sent,l=i.book_image,f=i.description,v=i.author,g=i.title,d(i.buy_links),b={_id:n,book_image:l,description:f,author:v,title:g},h='<img src="'.concat(l,'" alt="book" class="card-img-modal">\n<h5 class="title">').concat(g,'</h5>\n<p class="author-card-modal">').concat(v,'</p>\n<p class="text-card-modal">').concat(f,'</p>\n<ul class="shops-modal">\n<li class="li-modal">\n<a href="').concat(o,'" target="_blank">\n<img class="amazon" src="').concat(new URL(A),'" alt="Amazon"</a>\n</li>\n<li class="li-modal">\n  <a href="').concat(a,'" target="_blank">\n<img class="apple" src="').concat(new URL(j),'" alt="Apple-book"></a>\n</li>\n<li class="li-modal">\n  <a href="').concat(s,'" target="_blank">\n<img class="book-shop" src="').concat(new URL(B),'" alt="Book-shop"></a>\n</li>\n</ul>\n'),console.log("markup",h),u(h);case 20:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function d(e){e.forEach((function(e){"Amazon"===e.name?o=e.url:"Apple Books"===e.name?a=e.url:"Bookshop"===e.name&&(s=e.url)}))}function u(e){t.cardModal.innerHTML=e}function p(e){return f.apply(this,arguments)}function f(){return(f=e(r)(e(c).mark((function t(n){var o,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://books-backend.p.goit.global/books/".concat(n));case 2:return o=e.sent,e.next=5,o.json();case 5:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function m(){window.removeEventListener("click",i),document.body.classList.add("modal-open"),t.modal.classList.remove("is-hidden-modal-book"),document.addEventListener("keydown",v)}function v(e){"backdrop-modal-book"!==e.target.className&&"Escape"!==e.code||(t.modal.classList.add("is-hidden-modal-book"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",v),window.addEventListener("click",i))}t.modal.addEventListener("click",v),window.addEventListener("click",i);var b={};document.querySelector(".js-add-to-list").addEventListener("click",(function(){if(function(e){var t=localStorage.getItem(g);return!!t&&JSON.parse(t).some((function(t){return t._id===e}))}(b._id))console.log("Книга вже є у списку покупок");else{var e=localStorage.getItem(g),t=[];e&&(t=JSON.parse(e)),t.push(b),localStorage.setItem(g,JSON.stringify(t)),console.log("Вітаємо! Ви додали книгу до списку покупок")}}));var g="books"}(),a("8Veln");r=a("bpxeT"),c=a("2TvXO"),b=a("dIxxU"),k=a("6JpON");var M=document.querySelector(".category"),N=document.querySelector(".container-books-card");M.insertAdjacentHTML("beforeend",'<ul class="categBook"></ul>');var U=document.querySelector(".categBook");function C(){var e=window.innerWidth;return e<768?new URL(H):e<1440?new URL(O):new URL(T)}function J(e){return F.apply(this,arguments)}function F(){return(F=e(r)(e(c).mark((function t(n){var o,a,r,s,i,l,d,u;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(),N.innerHTML="",t.prev=2,t.next=5,b.default.get("https://books-backend.p.goit.global/books/category?category=".concat(n));case 5:o=t.sent,a=o.data,(r=document.createElement("h2")).classList.add("selected-category-name"),s=n.split(" "),i=s.pop(),l=s.join(" "),r.innerHTML="".concat(l,' <split class="last-word-category">').concat(i,"</split>"),N.appendChild(r),(d=document.createElement("ul")).classList.add("selected-category"),N.appendChild(d),u=document.querySelector(".selected-category"),a.forEach((function(e){var t=document.createElement("li");t.classList.add("book-card-preview");var n='<div class="book-preview-container""><div class="book-image">\n      <img src="'.concat(e.book_image,'" class="img-book" alt="book-title-preview" loading="lazy" onerror="src=\'').concat(C(),'\'" data-id="').concat(e._id,'">\n                        </div>\n                        <div>\n                          <h2 class="book-title">').concat(e.title,'</h2>\n                          <p class="book-author">').concat(e.author,"</p>\n                        </div></div>");t.innerHTML=n,u.appendChild(t)})),y(),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(2),e(k).Notify.failure("Oops! Something went wrong... Please try again."),y();case 26:case"end":return t.stop()}}),t,null,[[2,22]])})))).apply(this,arguments)}function z(){return(z=e(r)(e(c).mark((function t(){var n,o,a,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),e.prev=1,e.next=4,b.default.get("https://books-backend.p.goit.global/books/category-list");case 4:n=e.sent,o=n.data,a=o.sort((function(e,t){return e.list_name.localeCompare(t.list_name)})),(r=document.createElement("li")).classList.add("bookcat"),r.classList.add("allBooks"),r.textContent="All categories",U.appendChild(r),document.querySelector(".allBooks").addEventListener("click",(function(){window.location.href="index.html"})),a.forEach((function(e){var t=document.createElement("li");t.classList.add("bookcat"),U.appendChild(t),t.innerHTML=e.list_name,t.addEventListener("click",(function(){J(e.list_name)}))})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),y();case 21:case"end":return e.stop()}}),t,null,[[1,17]])})))).apply(this,arguments)}window.addEventListener("load",(function(){return z.apply(this,arguments)}));var P=document.querySelector(".scroll-up");P.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-50),setTimeout(e,0))})),window.addEventListener("scroll",(function(){var e=window.pageYOffset,t=document.documentElement.clientHeight;P.style.display=e>t?"block":"none"}));var V=document.querySelector("header"),I=document.querySelector("body");window.addEventListener("scroll",(function(){window.scrollY>0?(I.style.paddingTop="".concat(V.offsetHeight,"px"),V.classList.add("fixed-header")):(I.style.paddingTop=0,V.classList.remove("fixed-header"))}));var W=document.querySelector(".js-menu-container"),X=document.querySelector(".js-open-menu"),D=document.querySelector(".js-close-menu"),Y=function(){var e="true"===X.getAttribute("aria-expanded")||!1;X.setAttribute("aria-expanded",!e),W.classList.toggle("is-open")};X.addEventListener("click",Y),D.addEventListener("click",Y),a("9Cizd"),a("9Gy8A"),a("fhhbN"),a("2UiAG"),a("2C39u")}();
//# sourceMappingURL=index.d3e9d268.js.map
