{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/shopping/shopping-list.js","src/js/shopping/icon-path-refs.js","node_modules/@parcel/runtime-js/lib/runtime-d3e5982ebf09fbdc.js","node_modules/@parcel/runtime-js/lib/runtime-02b6e9ac0bc5798d.js","node_modules/@parcel/runtime-js/lib/runtime-d3741b82b52b7e44.js","node_modules/@parcel/runtime-js/lib/runtime-93d2505b57576199.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","node_modules/@parcel/runtime-js/lib/runtime-0f8c48025036cf1c.js","src/shopping-list.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","// Импорт переменных-ссылок на изображения из \"icon-path-refs.js\".\r\nimport getIconPaths from './icon-path-refs';\r\nconst {\r\n  appleBooksIconPath,\r\n  bookShopIconPath,\r\n  amazonIconPath,\r\n  svgTrashIcon,\r\n  emptyListStubImage,\r\n} = getIconPaths();\r\n\r\n// Переменные-ссылки на HTML элементы.\r\nconst divEl = document.querySelector('.shopping__list');\r\nconst paginationContainerPages = document.querySelector('.paginations__container-pages');\r\nconst paginationContainerBackBtn = document.querySelector('.paginations__container-back');\r\nconst paginationContainerEndBtn = document.querySelector('.paginations__container-end');\r\nconst paginationsSection = document.querySelector('.paginations');\r\nconst startButton = document.querySelector(\"button[name='startButton']\");\r\nconst previousButton = document.querySelector(\"button[name='previousButton']\");\r\nconst nextButton = document.querySelector(\"button[name='nextButton']\");\r\nconst endButton = document.querySelector(\"button[name='endButton']\");\r\n\r\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books';\r\n\r\nconst shoppingList =\r\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\r\n\r\n// !===============Paginagions variables=================\r\n\r\nconst isMobile = window.innerWidth < 767;\r\n\r\nconst pageSize = isMobile ? 4 : 3;\r\nlet totalPages = Math.ceil(shoppingList.length / pageSize);\r\nlet currentPage = 1;\r\nlet startIndex = (currentPage - 1) * pageSize;\r\nlet endIndex = startIndex + pageSize;\r\nlet itemsOnPage = shoppingList.slice(startIndex, endIndex);\r\n\r\nfunction renderMarkUp(itemsOnPage) {\r\n  return itemsOnPage\r\n    .map(\r\n      ({\r\n        _id,\r\n        title,\r\n        author,\r\n        description,\r\n        list_name,\r\n        book_image,\r\n        amazon_product_url,\r\n        buy_links: [apple, bookshop],\r\n      }) => {\r\n        return `\r\n        <article class=\"shopping__card\">\r\n          <div class=\"grid-img\">\r\n            <img class=\"shopping__card-img\" src=\"${book_image}\" alt=\"${title}\" />\r\n          </div>\r\n\r\n          <div class=\"grid-title\">\r\n            <h3 class=\"shopping__card-title\">${title}</h3>\r\n            <p class=\"shopping__card-category\">${list_name}</p>\r\n          </div>\r\n\r\n          <div class=\"grid-description\">\r\n            <p class=\"shopping__card-description\">${description}</p>\r\n          </div>\r\n\r\n          <div class=\"grid-author\">\r\n            <p class=\"shopping__card-author\">${author}</p>\r\n          </div>\r\n\r\n          <div class=\"grid-shoplist\">\r\n            <ul class=\"shopping__card-shoplist\">\r\n              <li class=\"store\">\r\n                <a \"modal-shop-img\" href=\"${amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Amazon link\">\r\n                  <img class=\"modal-shop-img shopping-shopimg amazon\" src=\"${amazonIconPath}\" alt=\"Amazon link\" alt=\"Amazon live page\"/>\r\n                </a>\r\n              </li>\r\n              <li class=\"store\">\r\n                <a \"modal-shop-img\" href=\"${apple.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Apple Books link\">\r\n                  <img class=\"modal-shop-img shopping-shopimg apple\" src=\"${appleBooksIconPath}\" alt=\"Apple Books link\" />\r\n                </a>\r\n              </li>\r\n              <li class=\"store\">\r\n                <a \"modal-shop-img\" href=\"${bookshop.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"BookShop link\">\r\n                  <img class=\"modal-shop-img shopping-shopimg book-shop\" src=\"${bookShopIconPath}\" alt=\"BookShop link\" />\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <button class=\"shopping__card-btn\" type=\"button\" data-book-id=\"${_id} aria-label=\"Remove book from shopping list\">\r\n            <svg class=\"icon-trash\" data-book-id=\"${_id}\" width=\"17\" height=\"17\">\r\n              <use href=\"${svgTrashIcon}#icon-trash\"></use>\r\n            </svg>\r\n          </button>\r\n        </article>\r\n        `;\r\n      }\r\n    )\r\n    .join('');\r\n}\r\n\r\nfunction isEmpty() {\r\n  if (!shoppingList.length) {\r\n    divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${emptyListStubImage}\" alt=\"Shop is Empty\"></div >`;\r\n    return;\r\n  }\r\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(itemsOnPage));\r\n}\r\n\r\nisEmpty();\r\n\r\ndivEl.addEventListener('click', event => {\r\n  if (event.target.closest('.shopping__card-btn')) {\r\n    const BookID = event.target.getAttribute('data-book-id');\r\n\r\n    const bookIndex = shoppingList.findIndex(\r\n      bookInStorage => bookInStorage._id === BookID\r\n    );\r\n\r\n    shoppingList.splice(bookIndex, 1);\r\n\r\n    localStorage.setItem(\r\n      SHOPPING_LIST_STORAGE_KEY,\r\n      JSON.stringify(shoppingList)\r\n    );\r\n\r\n    if (!shoppingList.length) {\r\n      divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${emptyListStubImage}\" alt=\"Shop is Empty\"></div >`;\r\n      return;\r\n    } else if (!sliceArrayBooks().length) {\r\n      previousButton.click();\r\n      destroyChildElement(paginationContainerPages);\r\n    } else {\r\n      divEl.innerHTML = renderMarkUp(sliceArrayBooks());\r\n      // console.log(sliceArrayBooks());\r\n      destroyChildElement(paginationContainerPages);\r\n    }\r\n    checkingArrayBooks();\r\n  }\r\n});\r\n\r\n// !=====================Paginations==========================\r\n// !==========================================================\r\nfor (let i = 1; i <= totalPages; i++) {\r\n  if (shoppingList.length <= 3) {\r\n    return;\r\n  }\r\n  const pageNumber = i;\r\n  const button = document.createElement('button');\r\n  button.classList.add('paginations__btn');\r\n  button.classList.add('paginations__btn--pages');\r\n  button.textContent = i;\r\n\r\n  activDisplayFlexOnElement(paginationContainerBackBtn);\r\n  activDisplayFlexOnElement(paginationContainerEndBtn);\r\n\r\n  // handler button pages\r\n  button.addEventListener('click', () => {\r\n    currentPage = pageNumber;\r\n    deleteMurkup();\r\n    createNewBooks();\r\n    removeDisableforElement(startButton);\r\n    removeDisableforElement(endButton);\r\n  });\r\n  paginationContainerPages.appendChild(button);\r\n}\r\n\r\npaginationContainerPages.firstChild.classList.add('pagination-def-active');\r\n\r\npaginationsSection.addEventListener(\r\n  'click',\r\n  handlerPaginationsButtonsStartPreviousNextStart\r\n);\r\nfunction handlerPaginationsButtonsStartPreviousNextStart(event) {\r\n  const activButton = document.querySelector('.pagination-def-active');\r\n  // console.log(event.target);\r\n  if (event.target.tagName !== 'BUTTON') {\r\n    return;\r\n  }\r\n\r\n  switch (event.target) {\r\n    case previousButton:\r\n      if (currentPage > 1) {\r\n        currentPage--;\r\n        deleteMurkup();\r\n        createNewBooks();\r\n        removeDisableforElement(endButton);\r\n\r\n        activButton.classList.remove('pagination-def-active');\r\n        activButton.previousElementSibling.classList.add('pagination-def-active');\r\n      }\r\n      break;\r\n    case nextButton:\r\n      if (currentPage < totalPages) {\r\n        currentPage++;\r\n        deleteMurkup();\r\n        createNewBooks();\r\n        removeDisableforElement(startButton);\r\n\r\n        activButton.classList.remove('pagination-def-active');\r\n        activButton.nextElementSibling.classList.add('pagination-def-active');\r\n      }\r\n      break;\r\n    case startButton:\r\n      currentPage = 1;\r\n      deleteMurkup();\r\n      createNewBooks();\r\n      addDisableforElement(startButton);\r\n      removeDisableforElement(endButton);\r\n      highlighteTheСurrentРage(paginationContainerPages.firstChild);\r\n      break;\r\n    case endButton:\r\n      currentPage = totalPages;\r\n      deleteMurkup();\r\n      createNewBooks();\r\n      addDisableforElement(endButton);\r\n      removeDisableforElement(startButton);\r\n      highlighteTheСurrentРage(paginationContainerPages.lastElementChild);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\npaginationContainerPages.addEventListener(\r\n  'click',\r\n  handleButtonPaginationContainerPages\r\n);\r\n\r\nfunction handleButtonPaginationContainerPages(event) {\r\n  if (event.target.tagName !== 'BUTTON') {\r\n    return;\r\n  }\r\n  highlighteTheСurrentРage(event.target);\r\n}\r\n\r\n// !==================functionsPaginations====================\r\n// !==========================================================\r\n\r\nfunction deleteMurkup() {\r\n  divEl.innerHTML = '';\r\n}\r\nfunction sliceArrayBooks() {\r\n  startIndex = (currentPage - 1) * pageSize;\r\n  endIndex = startIndex + pageSize;\r\n  return shoppingList.slice(startIndex, endIndex);\r\n}\r\nfunction createNewBooks() {\r\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(sliceArrayBooks()));\r\n}\r\nfunction removeDisableforElement(element) {\r\n  element.disabled = false;\r\n}\r\nfunction addDisableforElement(element) {\r\n  element.disabled = true;\r\n}\r\nfunction activDisplayFlexOnElement(element) {\r\n  element.style.display = 'flex';\r\n}\r\nfunction activDisplayNoneOnElement(element) {\r\n  element.style.display = 'none';\r\n}\r\nfunction destroyChildElement(element) {\r\n  const a = shoppingList.length / pageSize;\r\n  if (Math.round(a) === a) {\r\n    return element.lastElementChild.remove();\r\n  } else {\r\n    return;\r\n  }\r\n}\r\nfunction checkingArrayBooks() {\r\n  if (shoppingList.length <= 3) {\r\n    activDisplayNoneOnElement(paginationContainerBackBtn);\r\n    activDisplayNoneOnElement(paginationContainerEndBtn);\r\n    paginationContainerPages.innerHTML = '';\r\n  }\r\n}\r\nfunction highlighteTheСurrentРage(element) {\r\n  const activButton = document.querySelector('.pagination-def-active');\r\n\r\n  if (activButton) {\r\n    activButton.classList.remove('pagination-def-active');\r\n  }\r\n\r\n  element.classList.add('pagination-def-active');\r\n}\r\n","export default function () {\r\n  return {\r\n    // Online stores icons\r\n    appleBooksIconPath: new URL('../../images/shopping/apple-books.png', import.meta.url).href,\r\n\r\n    bookShopIconPath: new URL('../../images/shopping/book-shop.png', import.meta.url).href,\r\n\r\n    amazonIconPath: new URL('../../images/shopping/amazon.png', import.meta.url).href,\r\n\r\n    // Empty list stub image\r\n    emptyListStubImage: new URL('../../images/shopping/shoppingbook.png', import.meta.url).href,\r\n\r\n    // SVG\r\n    svgTrashIcon: new URL('../../images/sprite.svg', import.meta.url),\r\n  };\r\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fUYsE\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"aQOWp\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"CgNCO\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dvmiV\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.dcf949ed.js\\\",\\\"fUYsE\\\":\\\"apple-books.652b354e.png\\\",\\\"aQOWp\\\":\\\"book-shop.1d091ebd.png\\\",\\\"CgNCO\\\":\\\"amazon.626c9508.png\\\",\\\"dvmiV\\\":\\\"shoppingbook.6c062fbc.png\\\",\\\"lp5u4\\\":\\\"sprite.5a0e06fa.svg\\\",\\\"1XaNB\\\":\\\"index.8bd142f9.css\\\",\\\"a8cj2\\\":\\\"shopping-list.1a565dfd.js\\\"}\"));","import './js/slider.js';\r\nimport './js/dark-theme.js';\r\n\r\n// Content\r\nimport './js/shopping/shopping-list.js';\r\n\r\n// Authorization \"firebase\".\r\nimport './js/modals/firebase/firebase.js';\r\nimport './js/modals/firebase/authorization-servise.js';\r\nimport './js/modals/firebase/firebase-servise.js';\r\n\r\n// Authorization \"modal-login\".\r\nimport './js/modals/modal-login/authorization-form.js';\r\nimport './js/modals/modal-login/form-validator.js';\r\n\r\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$fOghy","parcelRequire","appleBooksIconPath","bookShopIconPath","amazonIconPath","svgTrashIcon","emptyListStubImage","default","divEl","document","querySelector","paginationContainerPages","paginationContainerBackBtn","paginationContainerEndBtn","paginationsSection","startButton","previousButton","nextButton","endButton","SHOPPING_LIST_STORAGE_KEY","shoppingList","JSON","parse","localStorage","getItem","pageSize","window","innerWidth","totalPages","Math","ceil","currentPage","startIndex","endIndex","itemsOnPage","slice","renderMarkUp","itemsOnPage1","map","_id","title","author","description","list_name","book_image","amazon_product_url","buy_links","apple","bookshop","url","insertAdjacentHTML","innerHTML","addEventListener","event","target","closest","BookID","getAttribute","bookIndex","findIndex","bookInStorage","splice","setItem","stringify","sliceArrayBooks","destroyChildElement","click","pageNumber","createElement","add","appendChild","button","firstChild","classList","activButton","tagName","deleteMurkup","createNewBooks","removeDisableforElement","remove","previousElementSibling","nextElementSibling","addDisableforElement","lastElementChild","$b82827cebf299a13$export$2e2bcd8739ae039","URL","href","module","exports","resolve","import","meta","toString","register"],"version":3,"file":"shopping-list.dcf949ed.js.map"}