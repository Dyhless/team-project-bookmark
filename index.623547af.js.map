{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-6ec93521866f0fa9.js","src/js/books-service.js","src/js/loader.js","src/js/book-card.js","node_modules/@parcel/runtime-js/lib/runtime-de26a14284f3b108.js","node_modules/@parcel/runtime-js/lib/runtime-9a840c2176f1c5d5.js","node_modules/@parcel/runtime-js/lib/runtime-e58f9a3a16ec3a3b.js","src/js/modal-window.js","node_modules/@parcel/runtime-js/lib/runtime-6080f64f1646b70c.js","node_modules/@parcel/runtime-js/lib/runtime-5b47295b3bdb27f5.js","node_modules/@parcel/runtime-js/lib/runtime-ba5079c6a4d7af80.js","src/js/category.js","src/js/scroll-up.js","src/js/burger.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.623547af.js\\\",\\\"lGJMy\\\":\\\"plug-empte-book_335x485.3bc43583.png\\\",\\\"3HCpm\\\":\\\"plug-empte-book_218x316.adc93518.png\\\",\\\"6MBmZ\\\":\\\"plug-empte-book_180x256.b984b05b.png\\\",\\\"e31Gs\\\":\\\"amazon_62x19.626c9508.png\\\",\\\"8Rppq\\\":\\\"apple-book_33x32.9b2fbf78.png\\\",\\\"kZ2io\\\":\\\"book-shop_38x36.1d091ebd.png\\\",\\\"1XaNB\\\":\\\"index.ec73103e.css\\\",\\\"a8cj2\\\":\\\"shopping-list.9a09e230.js\\\"}\"));","import axios from 'axios';\r\n\r\nexport class BooksService {\r\n  #BASE_URL = 'https://books-backend.p.goit.global/books/';\r\n  bookID = null;\r\n\r\n  async fetchTopBooks() {\r\n    return await axios.get(`${this.#BASE_URL}/top-books`).catch(console.error);\r\n  }\r\n\r\n  async fetchBookById(id) {\r\n    try {\r\n      const response = await axios.get(`${this.#BASE_URL}/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n}\r\n","const loader = document.querySelector('.loader-backdrop');\r\n\r\nfunction hideLoader() {\r\n  loader.classList.add('loader-visible');\r\n}\r\n\r\nfunction showLoader() {\r\n  loader.classList.remove('loader-visible');\r\n}\r\n\r\nexport { loader, hideLoader, showLoader };\r\n","import { BooksService } from './books-service';\r\nimport Notiflix from 'notiflix';\r\n\r\nimport { loader, showLoader, hideLoader } from './loader';\r\n\r\nconst booksService = new BooksService();\r\nconst listTopBooks = document.querySelector('.top-books');\r\n\r\nasync function renderBooksCategories() {\r\n  try {\r\n    const { data } = await booksService.fetchTopBooks();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    Notiflix.Notify.failure('Oops! Something went wrong... Please try again.');\r\n  }\r\n}\r\n\r\nfunction getFallbackImageUrl() {\r\n  const screenWidth = window.innerWidth;\r\n  if (screenWidth < 768) {\r\n    return new URL('../images/plug-empte-book_335x485.png', import.meta.url);\r\n  } else if (screenWidth < 1440) {\r\n    return new URL('../images/plug-empte-book_218x316.png', import.meta.url);\r\n  } else {\r\n    return new URL('../images/plug-empte-book_180x256.png', import.meta.url);\r\n  }\r\n}\r\n\r\nasync function updateBooksCategories() {\r\n  const categories = await renderBooksCategories();\r\n\r\n  let markup = '';\r\n\r\n  for (const { list_name, books } of categories) {\r\n    let categoryMarkup = `\r\n      <li>\r\n        <h3 class=\"name-category\">${list_name}</h3>\r\n        <ul class=\"list-category\">\r\n    `;\r\n\r\n    for (let j = 0; j < books.length; j += 1) {\r\n      const { _id, book_image, title, author } = books[j];\r\n\r\n      categoryMarkup += `\r\n        <li class=\"item-category-book js-book-modal\" data-book-id=\"${_id}\">\r\n          <a class=\"link-books\" href=\"#\">\r\n            <div class=\"card-book\">\r\n              <div class=\"img-card-book\">\r\n                <img src=\"${book_image}\" alt=\"book\" class=\"img-book\" loading=\"lazy\" data-id=\"${_id}\" onerror=\"src='${getFallbackImageUrl()}'\"/>\r\n              </div>\r\n              <div class=\"bestsellers-text-wrapper\">\r\n                <div class=\"title-wrap\">\r\n                  <p class=\"title-book\">${title}</p>\r\n                </div>\r\n                <div class=\"author-wrap\">\r\n                  <p class=\"book-author\">${author}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </a>\r\n        </li>\r\n      `;\r\n    }\r\n\r\n    categoryMarkup += `\r\n        </ul>\r\n        <button type=\"button\" aria-label=\"See more\" class=\"see-more\">See more</button>\r\n      </li>\r\n    `;\r\n\r\n    markup += categoryMarkup;\r\n  }\r\n\r\n  if (listTopBooks) {\r\n    listTopBooks.innerHTML = '';\r\n    listTopBooks.insertAdjacentHTML('beforeend', markup);\r\n    //     //======= Дашин код ==============\r\n    const seeMoreBtns = document.querySelectorAll('.see-more');\r\n    const categoriesForBtn = document.querySelectorAll('.bookcat');\r\n\r\n    for (let p = 0; p < categories.length; p++) {\r\n      seeMoreBtns[p].addEventListener('click', () => {\r\n        categoriesForBtn[p + 1].click();\r\n        window.scrollTo({\r\n          top: 0,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n    }\r\n    //     //======= /Дашин код ==============\r\n  }\r\n  hideLoader();\r\n}\r\n\r\nupdateBooksCategories();\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lGJMy\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3HCpm\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6MBmZ\")).toString();","import Notiflix from 'notiflix';\r\nimport { BooksService } from './books-service';\r\n\r\nconst bookAPI = new BooksService();\r\n\r\n(() => {\r\n  const refs = {\r\n    openModalBtn: document.querySelector('[data-modal-open]'),\r\n    closeModalBtn: document.querySelector('[data-modal-close]'),\r\n    modal: document.querySelector('[data-modal]'),\r\n    cardModal: document.querySelector('.card-modal'),\r\n  };\r\n\r\n  // refs.openModalBtn.addEventListener('click', toggleModal);\r\n  refs.closeModalBtn.addEventListener('click', closeModal);\r\n\r\n  let id = '';\r\n\r\n  let amazon_link = '';\r\n  let apple_link = '';\r\n  let bookshop_link = '';\r\n\r\n  refs.modal.addEventListener('click', logBackdropClick);\r\n  window.addEventListener('click', cardForModal);\r\n\r\n  function removeWindowEventListener() {\r\n    window.removeEventListener('click', cardForModal);\r\n  }\r\n\r\n  //   (e)=>{console.log(\"e====\",e.target);\r\n  // console.log(e.target.getAttribute(\"data-id\"));\r\n  // return id=(e.target.getAttribute(\"data-id\"));\r\n  // }\r\n\r\n  async function cardForModal(e) {\r\n    // проверка если попал на картинку\r\n    // e.preventDefault();\r\n\r\n    id = e.target.getAttribute('data-id');\r\n    if (id === null) {\r\n      return;\r\n    } else e.preventDefault(); // Prevent scrolling to the top\r\n    openModal();\r\n    // console.log('это айди', id);\r\n    // обработка ошибки фетча?\r\n    try {\r\n      const book = await bookAPI.fetchBookById(id);\r\n\r\n      // console.log('book', book);\r\n      const { book_image, description, author, title, buy_links } = book;\r\n      getLinkToShop(buy_links);\r\n      // ========== Додавання до localStorage ==========\r\n\r\n      const addBtn = document.querySelector('.js-add-to-list');\r\n      const notify = document.querySelector('.notify');\r\n      const removeBtn = document.querySelector('.js-remove-from-list');\r\n\r\n      addBtn.addEventListener('click', addToShoppingList);\r\n      removeBtn.addEventListener('click', removeFromShoppingList);\r\n\r\n      const BOOKS_STORAGE = 'storage-of-books';\r\n      let booksData = JSON.parse(localStorage.getItem(BOOKS_STORAGE)) || [];\r\n\r\n      function updateAddButton() {\r\n        if (isInShoppingList(id)) {\r\n          addBtn.classList.add('is-hidden');\r\n          removeBtn.classList.remove('is-hidden');\r\n          notify.classList.remove('is-hidden');\r\n        } else {\r\n          addBtn.classList.remove('is-hidden');\r\n          removeBtn.classList.add('is-hidden');\r\n          notify.classList.add('is-hidden');\r\n        }\r\n      }\r\n\r\n      function isInShoppingList(bookId) {\r\n        return booksData.some(book => book._id === bookId);\r\n      }\r\n\r\n      function addToShoppingList() {\r\n        if (isInShoppingList(id)) {\r\n          console.log('The book is already in the shopping list.');\r\n        } else {\r\n          booksData.push(book);\r\n          localStorage.setItem(BOOKS_STORAGE, JSON.stringify(booksData));\r\n          updateAddButton();\r\n        }\r\n      }\r\n\r\n      function removeFromShoppingList() {\r\n        booksData = booksData.filter(book => book._id !== id);\r\n        localStorage.setItem(BOOKS_STORAGE, JSON.stringify(booksData));\r\n        updateAddButton();\r\n      }\r\n\r\n      //==================\r\n\r\n      const markup = `<img src=\"${book_image}\" alt=\"book\" class=\"card-img-modal\">\r\n<div class=\"text-card-dt\"> \r\n      <h5 class=\"title\">${title}</h5>\r\n<p class=\"author-card-modal\">${author}</p>\r\n<p class=\"text-card-modal\">${description || 'No description'}</p>\r\n<ul class=\"shops-modal\">\r\n<li class=\"li-modal\">\r\n<a href=\"${amazon_link}\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n<img class=\"amazon\" src=\"${new URL(\r\n        '../images/shops/amazon_62x19.png',\r\n        import.meta.url\r\n      )}\" alt=\"Amazon\"</a>\r\n</li>\r\n<li class=\"li-modal\">\r\n  <a href=\"${apple_link}\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n<img class=\"apple\" src=\"${new URL(\r\n        '../images/shops/apple-book_33x32.png',\r\n        import.meta.url\r\n      )}\" alt=\"Apple-book\"></a>\r\n</li>\r\n<li class=\"li-modal\">\r\n  <a href=\"${bookshop_link}\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n<img class=\"book-shop\" src=\"${new URL(\r\n        '../images/shops/book-shop_38x36.png',\r\n        import.meta.url\r\n      )}\" alt=\"Book-shop\"></a>\r\n</li>\r\n</ul>\r\n</div>\r\n`;\r\n      // console.log('markup', markup);\r\n\r\n      renderMarkupModal(markup);\r\n      updateAddButton();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  function getLinkToShop(arr) {\r\n    arr.forEach(el => {\r\n      if (el.name === 'Amazon') {\r\n        amazon_link = el.url;\r\n      } else if (el.name === 'Apple Books') {\r\n        apple_link = el.url;\r\n      } else if (el.name === 'Bookshop') {\r\n        bookshop_link = el.url;\r\n      }\r\n    });\r\n  }\r\n\r\n  function renderMarkupModal(markup) {\r\n    refs.cardModal.innerHTML = markup;\r\n  }\r\n  // fetchBookById('643282b1e85766588626a0ba');\r\n\r\n  function openModal() {\r\n    //   const isModalOpen =\r\n    //     refs.openModalBtn.getAttribute('aria-expanded') === 'true' || false;\r\n    //   refs.openModalBtn.setAttribute('aria-expanded', !isModalOpen);\r\n    removeWindowEventListener();\r\n    document.body.classList.add('modal-open');\r\n    refs.modal.classList.remove('is-hidden-modal-book');\r\n    document.addEventListener('keydown', logBackdropClick);\r\n    disableBodyScroll(); // Prevent scrolling\r\n\r\n    //   const scrollLockMethod = !isModalOpen\r\n    //     ? 'disableBodyScroll'\r\n    //     : 'enableBodyScroll';\r\n    //   bodyScrollLock[scrollLockMethod](document.body);\r\n  }\r\n\r\n  function closeModal() {\r\n    document.body.classList.remove('modal-open');\r\n    refs.modal.classList.add('is-hidden-modal-book');\r\n    document.removeEventListener('keydown', logBackdropClick);\r\n    window.addEventListener('click', cardForModal);\r\n    enableBodyScroll(); // Enable scroll\r\n  }\r\n\r\n  function logBackdropClick(e) {\r\n    if (e.target.className === 'backdrop-modal-book' || e.code === 'Escape') {\r\n      refs.modal.classList.add('is-hidden-modal-book');\r\n      document.body.classList.remove('modal-open');\r\n      document.removeEventListener('keydown', logBackdropClick);\r\n      window.addEventListener('click', cardForModal);\r\n    } else return;\r\n  }\r\n\r\n  // Disable body scroll when the modal is open\r\n  function disableBodyScroll() {\r\n    document.body.classList.add('modal-open-scroll-lock');\r\n  }\r\n\r\n  // Enable body scroll when the modal is closed\r\n  function enableBodyScroll() {\r\n    document.body.classList.remove('modal-open-scroll-lock');\r\n  }\r\n\r\n  // Restore scrolling on window load in case the modal was open during a page refresh\r\n  window.addEventListener('load', enableBodyScroll);\r\n})();\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"e31Gs\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8Rppq\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kZ2io\")).toString();","import axios, { all } from 'axios';\r\nimport Notiflix from 'notiflix';\r\n\r\nimport { loader, showLoader, hideLoader } from './loader';\r\n\r\nconst asideList = document.querySelector('.category');\r\nconst homePageContainer = document.querySelector('.container-books-card');\r\n\r\nconst listStructure = `<ul class=\"categBook\"></ul>`;\r\nasideList.insertAdjacentHTML('beforeend', listStructure);\r\nconst listOfCateg = document.querySelector('.categBook');\r\n\r\nfunction getFallbackImageUrl() {\r\n  const screenWidth = window.innerWidth;\r\n\r\n  if (screenWidth < 768) {\r\n    return new URL('../images/plug-empte-book_335x485.png', import.meta.url);\r\n  } else if (screenWidth < 1440) {\r\n    return new URL('../images/plug-empte-book_218x316.png', import.meta.url);\r\n  } else {\r\n    return new URL('../images/plug-empte-book_180x256.png', import.meta.url);\r\n  }\r\n}\r\n\r\n//створюємо функцію, яка викликає запити по катекорії\r\nasync function getBooksByCategory(categoryName) {\r\n  showLoader();\r\n  homePageContainer.innerHTML = '';\r\n  let allBooksCat = document.querySelectorAll('.bookcat');\r\n  allBooksCat.forEach(element => {\r\n    if (element.classList.contains('current-page')) {\r\n      element.classList.remove('current-page');\r\n    }\r\n  });\r\n  const blabla = document.querySelector(`li[value=\"${categoryName}\"]`);\r\n  blabla.classList.add('current-page');\r\n\r\n  try {\r\n    const responseCategoty = await axios.get(\r\n      `https://books-backend.p.goit.global/books/category?category=${categoryName}`\r\n    );\r\n    const dataFile = responseCategoty.data;\r\n\r\n    //створюємо заголовок вибраної категорії\r\n    const selectedCatName = document.createElement('h2');\r\n    selectedCatName.classList.add('selected-category-name');\r\n    const words = categoryName.split(' ');\r\n    const lastWordOfCategory = words.pop();\r\n    const cuttedNameOFCategory = words.join(' ');\r\n    selectedCatName.innerHTML = `${cuttedNameOFCategory} <split class=\"last-word-category\">${lastWordOfCategory}</split>`;\r\n\r\n    homePageContainer.appendChild(selectedCatName);\r\n    //створюємо новий список\r\n    const newCategoryList = document.createElement('ul');\r\n    newCategoryList.classList.add('selected-category');\r\n    homePageContainer.appendChild(newCategoryList);\r\n    const newBookUl = document.querySelector('.selected-category');\r\n\r\n    //створюємо нові результати пошуку і заповняєм список результатів\r\n    dataFile.forEach(bookRes => {\r\n      const newBookLI = document.createElement('li');\r\n      newBookLI.classList.add('book-card-preview');\r\n      const bookFace = `<div class=\"book-preview-container\"\">\r\n                          <div class=\"book-image\">\r\n                            <img src=\"${\r\n                              bookRes.book_image\r\n                            }\" class=\"img-book\" alt=\"book-title-preview\" \r\n                            loading=\"lazy\" onerror=\"src='${getFallbackImageUrl()}'\" data-id=\"${\r\n        bookRes._id\r\n      }\">\r\n                          </div>\r\n                        <div>\r\n                          <h2 class=\"book-title\">${bookRes.title}</h2>\r\n                          <p class=\"book-author\">${bookRes.author}</p>\r\n                        </div></div>`;\r\n      newBookLI.innerHTML = bookFace;\r\n      newBookUl.appendChild(newBookLI);\r\n    });\r\n    hideLoader();\r\n  } catch (error) {\r\n    Notiflix.Notify.failure('Oops! Something went wrong... Please try again.');\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nasync function getCategoryList() {\r\n  showLoader();\r\n  try {\r\n    const response = await axios.get(\r\n      'https://books-backend.p.goit.global/books/category-list'\r\n    );\r\n    const data = response.data;\r\n    const sortedData = data.sort((a, b) =>\r\n      a.list_name.localeCompare(b.list_name)\r\n    );\r\n\r\n    const allCategories = document.createElement('li');\r\n    allCategories.classList.add('bookcat', 'allBooks');\r\n    allCategories.classList.add('current-page');\r\n    allCategories.textContent = 'All categories';\r\n    listOfCateg.appendChild(allCategories);\r\n    const allCatPoint = document.querySelector('.allBooks');\r\n    allCatPoint.addEventListener('click', () => {\r\n      window.location.href = 'index.html';\r\n    });\r\n\r\n    // categoryList = document.querySelectorAll('.bookcat');\r\n    sortedData.forEach(category => {\r\n      //створюю елемент списку категорій\r\n      const newLICateg = document.createElement('li');\r\n      newLICateg.classList.add('bookcat');\r\n      newLICateg.setAttribute('value', category.list_name);\r\n      listOfCateg.appendChild(newLICateg);\r\n      newLICateg.innerHTML = category.list_name;\r\n\r\n      newLICateg.addEventListener('click', () => {\r\n        getBooksByCategory(category.list_name);\r\n      });\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nwindow.addEventListener('load', getCategoryList);\r\n\r\n//\r\n","const scrollUpBtn = document.querySelector('.scroll-up');\r\n\r\nscrollUpBtn.addEventListener('click', goTop);\r\nwindow.addEventListener('scroll', trackScroll);\r\n\r\nfunction trackScroll() {\r\n  const offSet = window.pageYOffset;\r\n  const coords = document.documentElement.clientHeight;\r\n  if (offSet > coords) {\r\n    scrollUpBtn.style.display = 'flex';\r\n  } else {\r\n    scrollUpBtn.style.display = 'none';\r\n  }\r\n}\r\n\r\nfunction goTop() {\r\n  if (window.pageYOffset > 0) {\r\n    window.scrollBy(0, -50);\r\n    setTimeout(goTop, 0);\r\n  }\r\n}\r\n","const mobileMenuHeader = document.querySelector('header');\r\nconst openMenuBtn = document.querySelector('.js-open-menu');\r\nconst closeMenuBtn = document.querySelector('.js-close-menu');\r\n\r\nconst toggleMenu = () => {\r\n  const isMenuOpen =\r\n    openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\r\n  openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\r\n  mobileMenuHeader.classList.toggle('is-open');\r\n};\r\n\r\nopenMenuBtn.addEventListener('click', toggleMenu);\r\ncloseMenuBtn.addEventListener('click', toggleMenu);\r\n"],"names":["parcelRequire","register","JSON","parse","$2shzp","$a48794e7fe5d0ee1$export$a338dfb92c663e71","BASE_URL","bookID","async","default","get","this","catch","console","error","id","data","log","message","$bdfcdc80b4c38739$export$f4c5de44377d2946","document","querySelector","$bdfcdc80b4c38739$export$5cee2c2772922923","classList","add","$bdfcdc80b4c38739$export$56525cbb1fcd885c","remove","$b202017e37caf02b$var$booksService","$b202017e37caf02b$var$listTopBooks","$7b2c87b4c563e0ed$exports","URL","resolve","import","meta","url","toString","$fb102aee79cd5cdc$exports","$b202017e37caf02b$var$getFallbackImageUrl","screenWidth","window","innerWidth","$521e47f712514728$exports","categories","fetchTopBooks","$parcel$interopDefault","$7Y9D8","Notify","failure","$b202017e37caf02b$var$renderBooksCategories","markup","list_name","books","categoryMarkup","j","length","_id","book_image","title","author","$1aa81d6d0cd85e48$var$bookAPI","$5636da1feed72aa9$exports","$7ff6b471b33a9e03$exports","$6a94ba948dcf5e7d$exports","refs","openModalBtn","closeModalBtn","modal","cardModal","addEventListener","body","removeEventListener","logBackdropClick","cardForModal","enableBodyScroll","amazon_link","apple_link","bookshop_link","e","target","getAttribute","preventDefault","book1","fetchBookById","description","buy_links","forEach","el","name","addBtn","notify","removeBtn","isInShoppingList","booksData","push","localStorage","setItem","BOOKS_STORAGE","stringify","updateAddButton","filter","book","getItem","bookId","some","innerHTML","renderMarkupModal","$ea48f741b5bc75f2$var$asideList","$ea48f741b5bc75f2$var$homePageContainer","insertAdjacentHTML","$ea48f741b5bc75f2$var$listOfCateg","$ea48f741b5bc75f2$var$getBooksByCategory","categoryName","querySelectorAll","element","contains","dataFile","selectedCatName","createElement","words","split","lastWordOfCategory","pop","cuttedNameOFCategory","join","appendChild","newCategoryList","newBookUl","bookRes","newBookLI","bookFace","$ea48f741b5bc75f2$var$getFallbackImageUrl","response","sortedData","sort","a","b","localeCompare","allCategories","textContent","location","href","category","newLICateg","setAttribute","$52650fc44c8b8200$var$scrollUpBtn","$52650fc44c8b8200$var$goTop","pageYOffset","scrollBy","setTimeout","offSet","coords","documentElement","clientHeight","style","display","$63c3e220268f76eb$var$mobileMenuHeader","$63c3e220268f76eb$var$openMenuBtn","$63c3e220268f76eb$var$closeMenuBtn","$63c3e220268f76eb$var$toggleMenu","isMenuOpen","toggle"],"version":3,"file":"index.623547af.js.map"}