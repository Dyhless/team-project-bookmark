function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=o.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,o){n[e]=o},o.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.f41748d6.js","lGJMy":"plug-empte-book_335x485.3bc43583.png","3HCpm":"plug-empte-book_218x316.adc93518.png","6MBmZ":"plug-empte-book_180x256.b984b05b.png","1XaNB":"index.e2a8a839.css","a8cj2":"shopping-list.ad6874ea.js"}'));var s=a("2shzp");var l=a("7Y9D8");const c=document.querySelector(".loader-backdrop");function d(){c.classList.add("is-hidden")}function i(){c.classList.remove("is-hidden")}const r=new class{#e="https://books-backend.p.goit.global/books/";fetchTopBooks(){return s.default.get(`${this.#e}/top-books`).then((e=>e)).catch(console.error)}},u=document.querySelector(".top-books");let m="";var p;p=new URL(a("kyEFX").resolve("lGJMy"),import.meta.url).toString();var b;b=new URL(a("kyEFX").resolve("3HCpm"),import.meta.url).toString();var g;g=new URL(a("kyEFX").resolve("6MBmZ"),import.meta.url).toString();const k=async()=>{const o=await async function(){try{const{data:e}=await r.fetchTopBooks();return e}catch(o){console.log(o),e(l).Notify.failure("Oops! Something went wrong... Please try again.")}}();let t=5;t=window.innerWidth<768?1:window.innerWidth<1440?3:5,m="";for(let a=0;a<o.length;a+=1){const{list_name:s,books:c}=o[a];let i=`\n      <li>\n        <h3 class="name-category">${s}</h3>\n        <ul class="list-category">\n    `;for(let k=0;k<t&&k<c.length;k+=1){const{_id:w,book_image:h,title:y,author:f}=c[k];function n(){const e=window.innerWidth;return e<768?new URL(p):e<1440?new URL(b):new URL(g)}i+=`\n        <li class="item-category-book js-book-modal" data-book-id="${w}">\n          <a class="link-books" href="#">\n            <div class="card-book">\n              <div class="img-card-book">\n                <img src="${h}" alt="book" class="img-book" loading="lazy" data-id="${w}" onerror="src='${n()}'"/>\n              </div>\n              <div class="bestsellers-text-wrapper">\n                <div class="title-wrap">\n                  <p class="title-book">${y}</p>\n                </div>\n                <div class="author-wrap">\n                  <p class="book-author">${f}</p>\n                </div>\n              </div>\n            </div>\n          </a>\n        </li>\n      `}i+='\n        </ul>\n        <button type="button" aria-label="See more" class="see-more">See more</button>\n      </li>\n    ',m+=i}if(u){u.innerHTML="",u.insertAdjacentHTML("beforeend",m);const v=document.querySelectorAll(".see-more"),L=document.querySelectorAll(".bookcat");for(let E=0;E<o.length;E++)v[E].addEventListener("click",(()=>{L[E+1].click(),window.scrollTo({top:0,behavior:"smooth"})}))}d()};window.addEventListener("resize",k),k(),a("ghT7p"),a("72erS"),(()=>{const e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),cardModal:document.querySelector(".card-modal")};e.closeModalBtn.addEventListener("click",(function(){document.body.classList.remove("modal-open"),e.modal.classList.add("is-hidden-modal-book"),document.removeEventListener("keydown",n),window.addEventListener("click",t)}));let o="";async function t(a){if(o=a.target.getAttribute("data-id"),null===o)return;window.removeEventListener("click",t),document.body.classList.add("modal-open"),e.modal.classList.remove("is-hidden-modal-book"),document.addEventListener("keydown",n),console.log("это айди",o);const{book_image:s,description:l,author:c,title:d}=await async function(e){const o=await fetch(`https://books-backend.p.goit.global/books/${e}`),t=await o.json();return console.log(t),t}(o),i=`<img src="${s}" alt="book" class="card-img-modal">\n<h5 class="title">${d}</h5>\n<p class="author-card-modal">${c}</p>\n<p class="text-card-modal">${l}</p>`;console.log("markup",i),function(o){e.cardModal.innerHTML=o}(i)}function n(o){"backdrop-modal-book"!==o.target.className&&"Escape"!==o.code||(e.modal.classList.add("is-hidden-modal-book"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",n),window.addEventListener("click",t))}e.modal.addEventListener("click",n),window.addEventListener("click",t)})(),a("7tzR7");s=a("2shzp"),l=a("7Y9D8");const w=document.querySelector(".category"),h=document.querySelector(".container-books-card");w.insertAdjacentHTML("beforeend",'<ul class="categBook"></ul>');const y=document.querySelector(".categBook");async function f(o){i(),h.innerHTML="";try{const e=(await s.default.get(`https://books-backend.p.goit.global/books/category?category=${o}`)).data,t=document.createElement("h2");t.classList.add("selected-category-name");const n=o.split(" "),a=n.pop(),l=n.join(" ");t.innerHTML=`${l} <split class="last-word-category">${a}</split>`,h.appendChild(t);const c=document.createElement("ul");c.classList.add("selected-category"),h.appendChild(c);const i=document.querySelector(".selected-category");e.forEach((e=>{const o=document.createElement("li");o.classList.add("book-card-preview");const t=`<div class="book-preview-container""><div class="book-image">\n      <img src="${e.book_image}" class="img-book" alt="book-title-preview" loading="lazy" onerror="src='${function(){const e=window.innerWidth;return e<768?new URL(p):e<1440?new URL(b):new URL(g)}()}'" data-id="${e._id}">\n                        </div>\n                        <div>\n                          <h2 class="book-title">${e.title}</h2>\n                          <p class="book-author">${e.author}</p>\n                        </div></div>`;o.innerHTML=t,i.appendChild(o)})),d()}catch(o){e(l).Notify.failure("Oops! Something went wrong... Please try again."),d()}}window.addEventListener("load",(async function(){i();try{const e=await s.default.get("https://books-backend.p.goit.global/books/category-list"),o=e.data.sort(((e,o)=>e.list_name.localeCompare(o.list_name))),t=document.createElement("li");t.classList.add("bookcat"),t.classList.add("allBooks"),t.textContent="All categories",y.appendChild(t);document.querySelector(".allBooks").addEventListener("click",(()=>{window.location.href="index.html"})),o.forEach((e=>{const o=document.createElement("li");o.classList.add("bookcat"),y.appendChild(o),o.innerHTML=e.list_name,o.addEventListener("click",(()=>{f(e.list_name)}))}))}catch(e){console.log(e),d()}}));const v=document.querySelector(".scroll-up");v.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-50),setTimeout(e,0))})),window.addEventListener("scroll",(function(){const e=window.pageYOffset,o=document.documentElement.clientHeight;v.style.display=e>o?"block":"none"}));const L=document.querySelector("header"),E=document.querySelector("body");window.addEventListener("scroll",(function(){window.scrollY>0?(E.style.paddingTop=`${L.offsetHeight}px`,L.classList.add("fixed-header")):(E.style.paddingTop=0,L.classList.remove("fixed-header"))})),a("32KOn"),a("hTr2X"),a("cyM2s"),a("444Bz"),a("hW4wb");
//# sourceMappingURL=index.f41748d6.js.map
