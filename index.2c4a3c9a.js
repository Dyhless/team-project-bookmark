function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=o.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,o){n[e]=o},o.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.2c4a3c9a.js","lGJMy":"plug-empte-book_335x485.3bc43583.png","3HCpm":"plug-empte-book_218x316.adc93518.png","6MBmZ":"plug-empte-book_180x256.b984b05b.png","e31Gs":"amazon_62x19.626c9508.png","8Rppq":"apple-book_33x32.9b2fbf78.png","kZ2io":"book-shop_38x36.1d091ebd.png","1XaNB":"index.4bad9651.css","a8cj2":"shopping-list.88905ecd.js"}'));var l=a("2shzp");var s=a("7Y9D8");const c=document.querySelector(".loader-backdrop");function i(){c.classList.add("is-hidden")}function d(){c.classList.remove("is-hidden")}const r=new class{#e="https://books-backend.p.goit.global/books/";fetchTopBooks(){return l.default.get(`${this.#e}/top-books`).then((e=>e)).catch(console.error)}},m=document.querySelector(".top-books");let p="";var u;u=new URL(a("kyEFX").resolve("lGJMy"),import.meta.url).toString();var k;k=new URL(a("kyEFX").resolve("3HCpm"),import.meta.url).toString();var b;b=new URL(a("kyEFX").resolve("6MBmZ"),import.meta.url).toString();const g=async()=>{const o=await async function(){try{const{data:e}=await r.fetchTopBooks();return e}catch(o){console.log(o),e(s).Notify.failure("Oops! Something went wrong... Please try again.")}}();let t=5;t=window.innerWidth<768?1:window.innerWidth<1440?3:5,p="";for(let a=0;a<o.length;a+=1){const{list_name:l,books:c}=o[a];let d=`\n      <li>\n        <h3 class="name-category">${l}</h3>\n        <ul class="list-category">\n    `;for(let g=0;g<t&&g<c.length;g+=1){const{_id:w,book_image:h,title:f,author:y}=c[g];function n(){const e=window.innerWidth;return e<768?new URL(u):e<1440?new URL(k):new URL(b)}d+=`\n        <li class="item-category-book js-book-modal" data-book-id="${w}">\n          <a class="link-books" href="#">\n            <div class="card-book">\n              <div class="img-card-book">\n                <img src="${h}" alt="book" class="img-book" loading="lazy" data-id="${w}" onerror="src='${n()}'"/>\n              </div>\n              <div class="bestsellers-text-wrapper">\n                <div class="title-wrap">\n                  <p class="title-book">${f}</p>\n                </div>\n                <div class="author-wrap">\n                  <p class="book-author">${y}</p>\n                </div>\n              </div>\n            </div>\n          </a>\n        </li>\n      `}d+='\n        </ul>\n        <button type="button" aria-label="See more" class="see-more">See more</button>\n      </li>\n    ',p+=d}if(m){m.innerHTML="",m.insertAdjacentHTML("beforeend",p);const v=document.querySelectorAll(".see-more"),L=document.querySelectorAll(".bookcat");for(let E=0;E<o.length;E++)v[E].addEventListener("click",(()=>{L[E+1].click(),window.scrollTo({top:0,behavior:"smooth"})}))}i()};window.addEventListener("resize",g),g(),a("ghT7p"),a("72erS"),a("7Y9D8");var w;w=new URL(a("kyEFX").resolve("e31Gs"),import.meta.url).toString();var h;h=new URL(a("kyEFX").resolve("8Rppq"),import.meta.url).toString();var f;f=new URL(a("kyEFX").resolve("kZ2io"),import.meta.url).toString(),(()=>{const e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),cardModal:document.querySelector(".card-modal")};e.closeModalBtn.addEventListener("click",(function(){document.body.classList.remove("modal-open"),e.modal.classList.add("is-hidden-modal-book"),document.removeEventListener("keydown",s),window.addEventListener("click",l)}));let o="",t="",n="",a="";async function l(c){if(o=c.target.getAttribute("data-id"),null===o)return;window.removeEventListener("click",l),document.body.classList.add("modal-open"),e.modal.classList.remove("is-hidden-modal-book"),document.addEventListener("keydown",s),console.log("это айди",o);const{book_image:i,description:d,author:r,title:m,buy_links:p}=await async function(e){const o=await fetch(`https://books-backend.p.goit.global/books/${e}`),t=await o.json();return console.log(t),t}(o);p.forEach((e=>{"Amazon"===e.name?t=e.url:"Apple Books"===e.name?n=e.url:"Bookshop"===e.name&&(a=e.url)}));const u=`<img src="${i}" alt="book" class="card-img-modal">\n<h5 class="title">${m}</h5>\n<p class="author-card-modal">${r}</p>\n<p class="text-card-modal">${d}</p>\n<ul class="shops-modal">\n<li class="li-modal">\n<a href="${t}" target="_blank">\n<img class="amazon" src="${new URL(w)}" alt="Amazon"</a>\n</li>\n<li class="li-modal">\n  <a href="${n}" target="_blank">\n<img class="apple" src="${new URL(h)}" alt="Apple-book"></a>\n</li>\n<li class="li-modal">\n  <a href="${a}" target="_blank">\n<img class="book-shop" src="${new URL(f)}" alt="Book-shop"></a>\n</li>\n</ul>\n`;console.log("markup",u),function(o){e.cardModal.innerHTML=o}(u)}function s(o){"backdrop-modal-book"!==o.target.className&&"Escape"!==o.code||(e.modal.classList.add("is-hidden-modal-book"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",s),window.addEventListener("click",l))}e.modal.addEventListener("click",s),window.addEventListener("click",l)})(),a("7tzR7");l=a("2shzp"),s=a("7Y9D8");const y=document.querySelector(".category"),v=document.querySelector(".container-books-card");y.insertAdjacentHTML("beforeend",'<ul class="categBook"></ul>');const L=document.querySelector(".categBook");async function E(o){d(),v.innerHTML="";try{const e=(await l.default.get(`https://books-backend.p.goit.global/books/category?category=${o}`)).data,t=document.createElement("h2");t.classList.add("selected-category-name");const n=o.split(" "),a=n.pop(),s=n.join(" ");t.innerHTML=`${s} <split class="last-word-category">${a}</split>`,v.appendChild(t);const c=document.createElement("ul");c.classList.add("selected-category"),v.appendChild(c);const d=document.querySelector(".selected-category");e.forEach((e=>{const o=document.createElement("li");o.classList.add("book-card-preview");const t=`<div class="book-preview-container""><div class="book-image">\n      <img src="${e.book_image}" class="img-book" alt="book-title-preview" loading="lazy" onerror="src='${function(){const e=window.innerWidth;return e<768?new URL(u):e<1440?new URL(k):new URL(b)}()}'" data-id="${e._id}">\n                        </div>\n                        <div>\n                          <h2 class="book-title">${e.title}</h2>\n                          <p class="book-author">${e.author}</p>\n                        </div></div>`;o.innerHTML=t,d.appendChild(o)})),i()}catch(o){e(s).Notify.failure("Oops! Something went wrong... Please try again."),i()}}window.addEventListener("load",(async function(){d();try{const e=await l.default.get("https://books-backend.p.goit.global/books/category-list"),o=e.data.sort(((e,o)=>e.list_name.localeCompare(o.list_name))),t=document.createElement("li");t.classList.add("bookcat"),t.classList.add("allBooks"),t.textContent="All categories",L.appendChild(t);document.querySelector(".allBooks").addEventListener("click",(()=>{window.location.href="index.html"})),o.forEach((e=>{const o=document.createElement("li");o.classList.add("bookcat"),L.appendChild(o),o.innerHTML=e.list_name,o.addEventListener("click",(()=>{E(e.list_name)}))}))}catch(e){console.log(e),i()}}));const _=document.querySelector(".scroll-up");_.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-50),setTimeout(e,0))})),window.addEventListener("scroll",(function(){const e=window.pageYOffset,o=document.documentElement.clientHeight;_.style.display=e>o?"block":"none"}));const S=document.querySelector("header"),R=document.querySelector("body");window.addEventListener("scroll",(function(){window.scrollY>0?(R.style.paddingTop=`${S.offsetHeight}px`,S.classList.add("fixed-header")):(R.style.paddingTop=0,S.classList.remove("fixed-header"))})),a("32KOn"),a("hTr2X"),a("cyM2s"),a("444Bz"),a("hW4wb");
//# sourceMappingURL=index.2c4a3c9a.js.map
