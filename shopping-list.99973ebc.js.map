{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/shopping/shopping-list.js","src/js/shopping/icon-path-refs.js","node_modules/@parcel/runtime-js/lib/runtime-d3e5982ebf09fbdc.js","node_modules/@parcel/runtime-js/lib/runtime-02b6e9ac0bc5798d.js","node_modules/@parcel/runtime-js/lib/runtime-d3741b82b52b7e44.js","node_modules/@parcel/runtime-js/lib/runtime-93d2505b57576199.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","node_modules/@parcel/runtime-js/lib/runtime-0f8c48025036cf1c.js","src/shopping-list.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","// Импорт переменных-ссылок на изображения из \"icon-path-refs.js\".\nimport getIconPaths from './icon-path-refs';\nconst {\n  appleBooksIconPath,\n  bookShopIconPath,\n  amazonIconPath,\n  svgTrashIcon,\n  emptyListStubImage,\n} = getIconPaths();\n\n// Переменные-ссылки на HTML элементы.\nconst divEl = document.querySelector('.shopping__list');\nconst paginationContainerPages = document.querySelector('.paginations__container-pages');\nconst paginationContainerBackBtn = document.querySelector('.paginations__container-back');\nconst paginationContainerEndBtn = document.querySelector('.paginations__container-end');\nconst paginationsSection = document.querySelector('.paginations');\nconst startButton = document.querySelector(\"button[name='startButton']\");\nconst previousButton = document.querySelector(\"button[name='previousButton']\");\nconst nextButton = document.querySelector(\"button[name='nextButton']\");\nconst endButton = document.querySelector(\"button[name='endButton']\");\n\nconst SHOPPING_LIST_STORAGE_KEY = 'storage-of-books';\n\nconst shoppingList =\n  JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\n\n// !===============Paginagions variables=================\n\nconst isMobile = window.innerWidth < 767;\n\nconst pageSize = isMobile ? 4 : 3;\nlet totalPages = Math.ceil(shoppingList.length / pageSize);\nlet currentPage = 1;\nlet startIndex = (currentPage - 1) * pageSize;\nlet endIndex = startIndex + pageSize;\nlet itemsOnPage = shoppingList.slice(startIndex, endIndex);\n\nfunction renderMarkUp(itemsOnPage) {\n  return itemsOnPage\n    .map(\n      ({\n        _id,\n        title,\n        author,\n        description,\n        list_name,\n        book_image,\n        amazon_product_url,\n        buy_links: [apple, bookshop],\n      }) => {\n        return `\n        <article class=\"shopping__card\">\n          <div class=\"grid-img\">\n            <img class=\"shopping__card-img\" src=\"${book_image}\" alt=\"${title}\" />\n          </div>\n\n          <div class=\"grid-title\">\n            <h3 class=\"shopping__card-title\">${title}</h3>\n            <p class=\"shopping__card-category\">${list_name}</p>\n          </div>\n\n          <div class=\"grid-description\">\n            <p class=\"shopping__card-description\">${description}</p>\n          </div>\n\n          <div class=\"grid-author\">\n            <p class=\"shopping__card-author\">${author}</p>\n          </div>\n\n          <div class=\"grid-shoplist\">\n            <ul class=\"shopping__card-shoplist\">\n              <li class=\"store\">\n                <a \"modal-shop-img\" href=\"${amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Amazon link\">\n                  <img class=\"modal-shop-img shopping-shopimg amazon\" src=\"${amazonIconPath}\" alt=\"Amazon link\" alt=\"Amazon live page\"/>\n                </a>\n              </li>\n              <li class=\"store\">\n                <a \"modal-shop-img\" href=\"${apple.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Apple Books link\">\n                  <img class=\"modal-shop-img shopping-shopimg apple\" src=\"${appleBooksIconPath}\" alt=\"Apple Books link\" />\n                </a>\n              </li>\n              <li class=\"store\">\n                <a \"modal-shop-img\" href=\"${bookshop.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"BookShop link\">\n                  <img class=\"modal-shop-img shopping-shopimg book-shop\" src=\"${bookShopIconPath}\" alt=\"BookShop link\" />\n                </a>\n              </li>\n            </ul>\n          </div>\n          <button class=\"shopping__card-btn\" type=\"button\" data-book-id=\"${_id} aria-label=\"Remove book from shopping list\">\n            <svg class=\"icon-trash\" data-book-id=\"${_id}\" width=\"17\" height=\"17\">\n              <use href=\"${svgTrashIcon}#icon-trash\"></use>\n            </svg>\n          </button>\n        </article>\n        `;\n      }\n    )\n    .join('');\n}\n\nfunction isEmpty() {\n  if (!shoppingList.length) {\n    divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${emptyListStubImage}\" alt=\"Shop is Empty\"></div >`;\n    return;\n  }\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(itemsOnPage));\n}\n\nisEmpty();\n\ndivEl.addEventListener('click', event => {\n  if (event.target.closest('.shopping__card-btn')) {\n    const BookID = event.target.getAttribute('data-book-id');\n\n    const bookIndex = shoppingList.findIndex(\n      bookInStorage => bookInStorage._id === BookID\n    );\n\n    shoppingList.splice(bookIndex, 1);\n\n    localStorage.setItem(\n      SHOPPING_LIST_STORAGE_KEY,\n      JSON.stringify(shoppingList)\n    );\n\n    if (!shoppingList.length) {\n      divEl.innerHTML = `<div class=\"is-empty__wrapper\"><p class=\"is-empty__info\">This page is empty, add some books and proceed to order.</p><img class=\"is-empty__picture\" src=\"${emptyListStubImage}\" alt=\"Shop is Empty\"></div >`;\n      return;\n    } else if (!sliceArrayBooks().length) {\n      previousButton.click();\n      destroyChildElement(paginationContainerPages);\n    } else {\n      divEl.innerHTML = renderMarkUp(sliceArrayBooks());\n      console.log(sliceArrayBooks());\n      destroyChildElement(paginationContainerPages);\n    }\n    checkingArrayBooks();\n  }\n});\n\n// !=====================Paginations==========================\n// !==========================================================\nfor (let i = 1; i <= totalPages; i++) {\n  if (shoppingList.length <= 3) {\n    return;\n  }\n  const pageNumber = i;\n  const button = document.createElement('button');\n  button.classList.add('paginations__btn');\n  button.classList.add('paginations__btn--pages');\n  button.textContent = i;\n\n  activDisplayFlexOnElement(paginationContainerBackBtn);\n  activDisplayFlexOnElement(paginationContainerEndBtn);\n\n  // handler button pages\n  button.addEventListener('click', () => {\n    currentPage = pageNumber;\n    deleteMurkup();\n    createNewBooks();\n    removeDisableforElement(startButton);\n    removeDisableforElement(endButton);\n  });\n  paginationContainerPages.appendChild(button);\n}\n\npaginationContainerPages.firstChild.classList.add('active');\n\npaginationsSection.addEventListener(\n  'click',\n  handlerPaginationsButtonsStartPreviousNextStart\n);\nfunction handlerPaginationsButtonsStartPreviousNextStart(event) {\n  const activButton = document.querySelector('.active');\n  console.log(event.target);\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n\n  switch (event.target) {\n    case previousButton:\n      if (currentPage > 1) {\n        currentPage--;\n        deleteMurkup();\n        createNewBooks();\n        removeDisableforElement(endButton);\n\n        activButton.classList.remove('active');\n        activButton.previousElementSibling.classList.add('active');\n      }\n      break;\n    case nextButton:\n      if (currentPage < totalPages) {\n        currentPage++;\n        deleteMurkup();\n        createNewBooks();\n        removeDisableforElement(startButton);\n\n        activButton.classList.remove('active');\n        activButton.nextElementSibling.classList.add('active');\n      }\n      break;\n    case startButton:\n      currentPage = 1;\n      deleteMurkup();\n      createNewBooks();\n      addDisableforElement(startButton);\n      removeDisableforElement(endButton);\n      highlighteTheСurrentРage(paginationContainerPages.firstChild);\n      break;\n    case endButton:\n      currentPage = totalPages;\n      deleteMurkup();\n      createNewBooks();\n      addDisableforElement(endButton);\n      removeDisableforElement(startButton);\n      highlighteTheСurrentРage(paginationContainerPages.lastElementChild);\n      break;\n    default:\n      break;\n  }\n}\n\npaginationContainerPages.addEventListener(\n  'click',\n  handleButtonPaginationContainerPages\n);\n\nfunction handleButtonPaginationContainerPages(event) {\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n  highlighteTheСurrentРage(event.target);\n}\n\n// !==================functionsPaginations====================\n// !==========================================================\n\nfunction deleteMurkup() {\n  divEl.innerHTML = '';\n}\nfunction sliceArrayBooks() {\n  startIndex = (currentPage - 1) * pageSize;\n  endIndex = startIndex + pageSize;\n  return shoppingList.slice(startIndex, endIndex);\n}\nfunction createNewBooks() {\n  divEl.insertAdjacentHTML('beforeend', renderMarkUp(sliceArrayBooks()));\n}\nfunction removeDisableforElement(element) {\n  element.disabled = false;\n}\nfunction addDisableforElement(element) {\n  element.disabled = true;\n}\nfunction activDisplayFlexOnElement(element) {\n  element.style.display = 'flex';\n}\nfunction activDisplayNoneOnElement(element) {\n  element.style.display = 'none';\n}\nfunction destroyChildElement(element) {\n  const a = shoppingList.length / pageSize;\n  if (Math.round(a) === a) {\n    return element.lastElementChild.remove();\n  } else {\n    return;\n  }\n}\nfunction checkingArrayBooks() {\n  if (shoppingList.length <= 3) {\n    activDisplayNoneOnElement(paginationContainerBackBtn);\n    activDisplayNoneOnElement(paginationContainerEndBtn);\n    paginationContainerPages.innerHTML = '';\n  }\n}\nfunction highlighteTheСurrentРage(element) {\n  const activButton = document.querySelector('.active');\n\n  if (activButton) {\n    activButton.classList.remove('active');\n  }\n\n  element.classList.add('active');\n}\n","export default function () {\n  return {\n    // Online stores icons\n    appleBooksIconPath: new URL('../../images/shopping/apple-books.png', import.meta.url).href,\n\n    bookShopIconPath: new URL('../../images/shopping/book-shop.png', import.meta.url).href,\n\n    amazonIconPath: new URL('../../images/shopping/amazon.png', import.meta.url).href,\n\n    // Empty list stub image\n    emptyListStubImage: new URL('../../images/shopping/shoppingbook.png', import.meta.url).href,\n\n    // SVG\n    svgTrashIcon: new URL('../../images/sprite.svg', import.meta.url),\n  };\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fUYsE\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"aQOWp\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"CgNCO\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dvmiV\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.99973ebc.js\\\",\\\"fUYsE\\\":\\\"apple-books.652b354e.png\\\",\\\"aQOWp\\\":\\\"book-shop.1d091ebd.png\\\",\\\"CgNCO\\\":\\\"amazon.626c9508.png\\\",\\\"dvmiV\\\":\\\"shoppingbook.6c062fbc.png\\\",\\\"lp5u4\\\":\\\"sprite.5a0e06fa.svg\\\",\\\"1XaNB\\\":\\\"index.e2a8a839.css\\\",\\\"a8cj2\\\":\\\"shopping-list.ad6874ea.js\\\"}\"));","import './js/slider.js';\n// import './js/pagination.js';\nimport './js/dark-theme.js';\n// import './js/shopping-list-index.js';\n\n\n// Content\nimport './js/shopping/shopping-list.js';\n\n// Authorization \"firebase\".\nimport './js/modals/firebase/firebase.js';\nimport './js/modals/firebase/authorization-servise.js';\nimport './js/modals/firebase/firebase-servise.js';\n\n// Authorization \"modal-login\".\nimport './js/modals/modal-login/authorization-form.js';\nimport './js/modals/modal-login/form-validator.js';\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$fOghy","parcelRequire","appleBooksIconPath","bookShopIconPath","amazonIconPath","svgTrashIcon","emptyListStubImage","default","divEl","document","querySelector","paginationContainerPages","paginationContainerBackBtn","paginationContainerEndBtn","paginationsSection","startButton","previousButton","nextButton","endButton","SHOPPING_LIST_STORAGE_KEY","shoppingList","JSON","parse","localStorage","getItem","pageSize","window","innerWidth","totalPages","Math","ceil","currentPage","startIndex","endIndex","itemsOnPage","slice","renderMarkUp","itemsOnPage1","map","_id","title","author","description","list_name","book_image","amazon_product_url","buy_links","apple","bookshop","url","join","insertAdjacentHTML","innerHTML","addEventListener","event","target","closest","BookID","getAttribute","bookIndex","findIndex","bookInStorage","splice","setItem","stringify","sliceArrayBooks","console","log","destroyChildElement","click","activDisplayNoneOnElement","pageNumber","button","createElement","classList","add","textContent","activDisplayFlexOnElement","deleteMurkup","createNewBooks","removeDisableforElement","appendChild","element","disabled","addDisableforElement","style","display","a","round","lastElementChild","remove","activButton","firstChild","tagName","previousElementSibling","nextElementSibling","$b82827cebf299a13$export$2e2bcd8739ae039","URL","href","module","exports","resolve","import","meta","toString","register"],"version":3,"file":"shopping-list.99973ebc.js.map"}